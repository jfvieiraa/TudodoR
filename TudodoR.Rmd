--- 
title: "Uso do sistema R para análise de dados"
author: " "
date: "`r Sys.Date()`"
site: bookdown::bookdown_site
documentclass: book
bibliography: [book.bib, packages.bib]
biblio-style: apalike
link-citations: yes
description: "Notas de aulas de práticas estatística com o uso do sistema R."
---
--- 
title: "Uso do sistema R para análise de dados"
author: " "
date: "`r Sys.Date()`"
site: bookdown::bookdown_site
documentclass: book
bibliography: [book.bib, packages.bib]
biblio-style: apalike
link-citations: yes
description: "Notas de aulas de práticas estatística com o uso do sistema R."
---

# Pré requisitos

Material em construção.

Este material, em forma de notas de aula, foi escrito para a disciplina do Mestrado em Engenharia Agrícola, intitulado Uso do sistema R para análise de dados, no primeiro semestre de 2018.
Estas notas de aulas é uma coletânea de apostilas, livros, sites, forum e cursos voltando ao sistema R.  Foi utilizado desses materiais sua estrutura didática e rotinas que foram adaptados para o perfil da disciplina. 
O material consultado encontra-se referenciado no final de cada capitulo.

<!--chapter:end:index.Rmd-->


# R Básico 

Placeholder


## Expressões
## Valores Booleanos
## Variáveis
## Funções
## Ajuda
## Referência

<!--chapter:end:01-R_basico.Rmd-->


# Estruturas de Dados

Placeholder


## Vetor
### Vetores de Sequência
### Nomes de vetores
### Plotando um vetor
### Operações matemáticas
### Parcelas de dispersão
### Valores Faltantes
## Matrizes 
### Outras formas
### Acesso a Matriz
### Visualizações em dados matriciais
### Mais informações sobre construções de Matrizes
## Fatores
## Array
## Data.frame
### Índice dos Data.frames
### Manipulando um Data.frame
### Separando um data.frame por grupos
## Lista
### Alguns comandos que retornam listas
## Referência

<!--chapter:end:02-Estrutura_basica.Rmd-->


# Entrada de dados

Placeholder


## Onde os dados devem estar? 
## Entrando com dados
### Vetores
### Usando a função 'scan'
### Copiar e colar usando scan()
### Lendo dados através da área de transferência
### Usando a função edit
#### Exemplo 1
#### Exemplo 2
### Lendo dados de um arquivo texto
#### Exemplo 1 
#### Exemplo 2 
### Dados do tipo CSV
### A seguir listamos algumas  destas funções:
### Lendo dados disponíveis na web
### Lendo dados de uma planilha eletrônica
### Exercícios
## Salvar objetos de dados
### Outras funções
## Referência

<!--chapter:end:03-Entrada_dados.Rmd-->


# Criando Gráficos com o R

Placeholder


## Exemplos de gráficos com o R
## Entrada de dados
## Usando a função `plot()`
### Mudando o padrão dos pontos `pch=`
### Mudando as linhas (`lwd e lty`)
### Adicionando  linhas a um grafico de pontos
### Definindo o intervalo dos eixos
### Personalizando os gráficos
## Histogramas
### Personalizando gráficos
## Gráficos de Barras
## Boxplots
### Boxplot com fatorial
## Cores
## Interagindo com a Janela gráfica
## Texto e tamanho do símbolo
## Visualizar vários gráficos
### Varios gráficos na mesma janela gráfica
## Salvando gráficos

<!--chapter:end:04-Criando_graficos.Rmd-->


# Gráficos com ggplot2

Placeholder


## Personalizando os gráficos
### Cores
### Eixos
### Legenda
### Título
### Facets
## Exemplos
### Regressão
### Delineamento em blocos casualizados- DBC
### Dados Climáticos
## Referência

<!--chapter:end:05-Criando_graficos_2.Rmd-->


# Testes Estatísticos

Placeholder


## Teste t de Student
### Para uma média
### Para duas médias independentes
### Para duas médias dependentes
## Teste de variância
### Usando o teste de F
## Teste para a normalidade - `shapiro.test()` 
## Teste U de Mann-Whitney
## Covariância e Correlação
## Outros testes
### hydroGOF

<!--chapter:end:06-Teste_T_corre.Rmd-->


# Analise de variância (ANOVA)

Placeholder


## Delineamento inteiramente casualizado  
### Análise de experimento  em DIC  
### Análise de variância
### Transformação de dados
#### Transformação de dados BOX-COX
#### Análise de variância - Ajuste com a variável transformada.
### Aplicando teste de Tukey para comparar médias
### Aplicando teste para agrupar médias
### Referência

<!--chapter:end:07-Anova_dic.Rmd-->



## Delineamento em bloco casualizado 
### Análise de experimento DBC  
#### Análise de variância
##### Teste das pressuposições da análise de variância
####### Teste de Bartllet para homocedasticidade:
####### Teste de Shapiro-Wilk para Normalidade:
#### Transformação de dados
##### Transformação de dados com o BOX-COX
##### Análise de variância - Ajuste com a variável transformada.
### Pacote para analise de experimentos 
### Teste não parametrico
### Exercicio  1
### Referência

<!--chapter:end:08-Anova_DBC.Rmd-->



## Quadrado Latino
### Banco de dados
### Exercicios
### Exercicio para entregar

<!--chapter:end:09-Anova_QL.Rmd-->



## Regressão Linear simples
## Regressão Linear Multipla
### Referência

<!--chapter:end:10-Regressao_L_M.Rmd-->



## Regressão não linear
### Curva de retenção de água no solo

<!--chapter:end:11-Regressao_N_linear.Rmd-->


# Multivariada

Placeholder



<!--chapter:end:12-Multivariada.Rmd-->


# Dados climáticos

Placeholder


## Precipitação pluvial
### Análise anual dos dados
### Análise mensal dos dados - BOXPLOT
### Análise sazonal
### Alguns índices extremos
### Precipitaçao total chuva
## Evapotranspiração
### Pacote Evapotranspiration
### Referência

<!--chapter:end:13-Dados_clima.Rmd-->

## Dados temporais no R

```{r}
![](https://www.youtube.com/watch?v=1kmnJenbk0Y)
```


Vamos baixar os dados climáticos de Rondonópolis-MT:
```{r}
roo <- read.csv2("https://www.dropbox.com/s/1ajoi1c8pla3yk6/roo.csv?dl=1")
```

Podemos verificar o cabeçario do conjunto de dados:
```{r}
head(roo)
```

Baixando os pacotes necessários:
```{r message=FALSE}
library(dplyr)
```


Selecionando algumas colunas pelo nome com a função `select`:
```{r}
selecionar <- select(roo,ano,Tmax)
head(selecionar)
```


Retirar colunas com a função `select`:
```{r}
dados <- select (roo,-UR)
head(dados)
```

Filtrar os dados com a função `filter`
Apresentar somente os dias com temperatura mínima do ar menor que 20ºC:
```{r}
filter(roo, Tmin < 20)
```

Apresentar somente os dias com temperatura menor que 20ºC e umidade relativa do ar menor que 30%:
```{r}
dados_criticos <- filter(roo,Tmin < 20, UR <30 )
head(dados_criticos)
```

Quando precisamos adicionar uma coluna usamos a função `mutate`:
```{r}
dados <- mutate(roo, Tmd = ((Tmax + Tmin )/2))
head(dados)
```

Resumir e agrupar os dados usando a função `summarise`

Qual o valor mínimo de umidade relativa?
```{r}
summarise(roo, min(UR, na.rm = TRUE)) 
```

Qual o valor médio de velocidade do vento  por mês?
```{r}
summarise(group_by(roo, mm), mean(Vvento, na.rm = TRUE))
```


Vamos aprender a usar o operador **pipe**

A idéia do operador '%>%' (pipe) é bem simples: usar o valor resultante da expressão do lado esquerdo como primeiro argumento da função do lado direito.

Iremos filtrar os valores do banco de dados *roo* com as variáveis UR e mês com apresentação do cabeçalho ('head()'):
```{r}
head(select(roo, UR, mm))
```

Usando o piper:
```{r}
roo %>% select(UR, mm) %>% head
```

Exploração de dados:  gerar um resumo estatístico com o comando pipe:
```{r}
roo %>% 
  summarise(avg = mean(UR,na.rm=TRUE), 
            min = min(UR,na.rm=TRUE),
            max = max(UR,na.rm=TRUE),
            total = n())
```

Exploração de dados  gerar um resumo estatístico com o comando pipe agrupado por mês:
```{r}
roo %>% 
  group_by(mm) %>% 
  summarise(mean(UR, na.rm = TRUE))
```

Caso necessitamos retirar o mês de outubro:
```{r}
roo %>% 
  filter(mm != 10) %>% 
  group_by(mm) %>% 
  summarise(mean(UR, na.rm = TRUE))
```

Com os dados roo vamos filtrar os valores mensais da UR e Tmax, com uma condição de apresentar somente os valores de Tmax maiores que 40. Apresentação com a função head:
```{r}
roo %>%
  select(mm, UR, Tmax)%>%
  filter(Tmax > 40)  %>% head
```


Explorar os dados e visualizar com pacote dply e ggplot2

Vamos utilizar um novo banco de dados:
```{r}
trmm <- read.csv2(file ="https://www.dropbox.com/s/hf80ptt7lm6kbdb/roo_trmm.csv?dl=1", sep = "," )
head(trmm)
```

Com o pacote tidyr podemos reorganizar a tabela:
```{r message=FALSE}
library(tidyr)
```

Com a função `gather` iremos unir todos valores de chuva mensal em uma coluna separado pelo meses:
```{r}
dados = gather(trmm, TIME, ppt, MONTH_01:MONTH_12, na.rm = TRUE)
head(dados)
```

Visualizar dados temporais no R

Vamos baixar os dados climáticos de Rondonpolis-MT:
```{r}
roo <- read.csv2("https://www.dropbox.com/s/1ajoi1c8pla3yk6/roo.csv?dl=1")
head(roo)
tail(roo)
```


Os dados de Roo inicia de janeiro de 1998 a novembro de 2010.

Vamos retirar as colunas das datas:
```{r}
roo2=roo[,4:11]
head(roo2)
roo2=na.omit(roo2)
```

Converter os dados em um objeto de série temporal (ts):
```{r}
meuts = ts(roo2, start=c(1998, 1), end=c(2010, 11), frequency=12) 
plot(meuts)
```

Verificar os dados:
```{r}
start(meuts)
end(meuts)
frequency(meuts)
```

Apresentação gráfica:
```{r}
library(devtools)

require(ggfortify) #will plot the ts objects as ggplot2

autoplot(meuts) # time series on facets

autoplot(meuts, facets = F) #time series of stocks on one plot

```

## Datas no R

O Pacote `Lubridate` fornece ferramentas que facilitam a análise e manipulação de datas. Essas ferramentas são agrupadas abaixo por um propósito comum. Mais informações sobre cada função podem ser encontradas em sua documentação de ajuda:
```{r message=FALSE}
#install.packages("lubridate")
library(lubridate)
```

Qual o dia de hoje?
```{r}
today()
```

Qual o dia e horário?
```{r}
now()
```

Atribuir data em um objeto:
```{r}
x="1983-10-28"
```

YYYY-MM-DD: corresponde ao ano, mês e dia.

Qual a estrutura desse objeto?
```{r}
str(x)
```

O objeto *x* é um caracter, precisamos transformar para data com a função `as.Date()`:
```{r}
dia1 <- as.Date(x)
str(dia1)
```


Convertendo datas não padronizadas para padrão:
```{r}
dia2 = as.Date("12/27/2015", format = "%m/%d/%Y")
str(dia2)
```


```{r}
dia3 = as.Date("Novembro 22, 1998", format = "%B %d, %Y")
str(dia3)
```

Cálculos com as datas:
```{r}
dia2-dia3
```

```{r}
dia2>dia3
```

<!--chapter:end:14-Dados_tempor.Rmd-->



## Teste Mann-Kendall para Tendência
### Referência 

<!--chapter:end:16-Tendencia_tempora.Rmd-->


# Sensoriamento remoto

Placeholder


## Imagens de RPAs

<!--chapter:end:17-Analise_imagens.Rmd-->



## Imagens de satélites
## Curvas de nível e modelo 3D a partir do Modelo Digital de Elevação
## LIDAR
## Modelo Digital de Elevação MDE##

<!--chapter:end:18-Analise_imagens_sentinel.Rmd-->

`r if (knitr::is_html_output()) '
# References {-}
'`

<!--chapter:end:19-Referencia.Rmd-->

